<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>The Castor Testing Framework: Test Suite Execution and Test Creation</title><link rel="stylesheet" href="default.css"></head><body bgcolor="#ffffff" link="#6763a9" vlink="#6763a9" topmargin="0" bottommargin="0" leftmargin="0" marginheight="0" marginwidth="0"><a name="top"></a><table border="0" cellpadding="0" cellspacing="0" height="400"><tr><td width="10" valign="top" align="left" bgcolor="#7270c2"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td valign="top" align="left" bgcolor="#7270c2" width="150"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="7" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="70" valign="top" align="left"><img src="images/dotTrans.gif" width="70" height="6" border="0"></td><td width="100%" valign="top" align="left"><img src="images/top_2.gif" width="100%" height="6" border="0"></td></tr><tr><td width="10" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td bgcolor="#7270c2" valign="top" align="left" width="150"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="7" bgcolor="#ffffff" valign="top" align="left"></td><td width="70" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="100%" valign="middle" align="left"><a href="license.html"><span class="menuTopOff">License</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.codehaus.org"><span class="menuTopOff">Codehaus</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openejb.org"><span class="menuTopOff">OpenEJB</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openjms.sf.net"><span class="menuTopOff">OpenJMS</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openorb.sf.net"><span class="menuTopOn">OpenORB</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://tyrex.sf.net"><span class="menuTopOff">Tyrex</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><img src="images/dotTrans.gif" width="1" height="2" border="0"></td></tr><tr><td width="10" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="10" height="3" border="0"></td><td bgcolor="#7270c2" valign="top" align="right" width="150"><img src="images/line_sm.gif" width="105" height="3" border="0"></td><td width="7" bgcolor="#a9a5de" valign="top" align="left"><img src="images/line_sm.gif" width="7" height="3" border="0"></td><td width="70" valign="top" align="left"><img src="images/line_light.gif" width="70" height="3" border="0"></td><td width="100%" valign="top" align="left"><img src="images/line_light.gif" width="100%" height="3" border="0"></td></tr><tr><td bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="10" height="10" border="0"></td><td bgcolor="#7270c2" valign="top" align="left" width="150"><img src="images/dotTrans.gif" width="1" height="2" border="0"><br><table border="0" cellpadding="10" cellspacing="0"><tr><td><script type="text/javascript" src="http://www.ohloh.net/p/3635/widgets/project_users_logo.js"></script></td></tr></table><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Old releases</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="releases-old.html"><span class="subMenuOff">General</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://www.castor.org/1.3/index.html"><span class="subMenuOff">Release 1.3</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://www.castor.org/1.3rc1/index.html"><span class="subMenuOff">Release 1.3rc1</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://www.castor.org/1.2/index.html"><span class="subMenuOff">Release 1.2</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Main</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="index.html"><span class="subMenuOff">Home</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="about.html"><span class="subMenuOff">About</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="features.html"><span class="subMenuOff">Features</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="download.html"><span class="subMenuOff">Download</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="dependencies.html"><span class="subMenuOff">Dependencies</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="reference-guide.html"><span class="subMenuOffHighlighted">Reference guide</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="presentations.html"><span class="subMenuOff">Publications</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="javadoc/overview-summary.html"><span class="subMenuOff">JavaDoc</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="maven-integration.html"><span class="subMenuOff">Maven 2 support</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="maven-archetypes.html"><span class="subMenuOff">Maven 2 archetypes</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="schema.html"><span class="subMenuOff">DTD &amp; Schemas</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="changes.html"><span class="subMenuOff">Recent HTML changes</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="news.html"><span class="subMenuOff">News Archive</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://castor.codehaus.org/rss/castor-announce.xml"><span class="subMenuOff">RSS news feed</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://docs.codehaus.org/display/CASTOR/"><span class="subMenuOffHighlighted">Project Wiki</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Development/Support</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="lists.html"><span class="subMenuOff">Mailing Lists</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="scm.html"><span class="subMenuOff">SVN/JIRA</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="contributing.html"><span class="subMenuOff">Contributing</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="support.html"><span class="subMenuOff">Support</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://bamboo.ci.codehaus.org/browse/CASTOR"><span class="subMenuOff">Continuous builds</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="professional-services.html"><span class="subMenuOffHighlighted">Prof. services</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Related projects</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="spring-orm-integration.html"><span class="subMenuOff">Spring ORM support</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="spring-xml-intro.html"><span class="subMenuOff">Spring XML factories</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="ws-integration.html"><span class="subMenuOff">WS frameworks</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">XML</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="xml-link.html"><span class="subMenuOff">XML</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">XML Code Generator</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="srcgen-link.html"><span class="subMenuOff">XML Code Generator</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">JDO</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-introduction.html"><span class="subMenuOff">Introduction</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-starter-tutorial.html"><span class="subMenuOff">First steps</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo.html"><span class="subMenuOff">Using JDO</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-database-conf.html"><span class="subMenuOff">JDO Config</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="types.html"><span class="subMenuOff">Types</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-mapping.html"><span class="subMenuOff">JDO Mapping</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-faq.html"><span class="subMenuOff">JDO FAQ</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-examples.html"><span class="subMenuOff">JDO Examples</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-howto.html"><span class="subMenuOffHighlighted">JDO HOW-TOs</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-tips-tricks.html"><span class="subMenuOffHighlighted">Tips &amp; Tricks</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-other-features.html"><span class="subMenuOff">Other Features</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-self-executable-examples.html"><span class="subMenuOff">JDO sample JAR</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Tools</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="schemaGen-anttask.html"><span class="subMenuOff">Schema generator</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Advanced JDO</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-caching-detail.html"><span class="subMenuOff">Caching</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="oql.html"><span class="subMenuOff">OQL</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="locking.html"><span class="subMenuOff">Trans. &amp; Locks</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="design-persist.html"><span class="subMenuOff">Design</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="key-generator.html"><span class="subMenuOff">KeyGen</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="long-transact.html"><span class="subMenuOff">Long Trans.</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="nested-attr.html"><span class="subMenuOff">Nested Attrs.</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-pooling.html"><span class="subMenuOff">Pooling Examples</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="postgresql-blobs.html"><span class="subMenuOff">LOBs</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="jdo-best-practice.html"><span class="subMenuOff">Best practice</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">DDL Generator</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="ddlgen.html"><span class="subMenuOff">Using DDL Generator</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="ddlgen-properties.html"><span class="subMenuOff">Properties</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="ddlgen-anttask.html"><span class="subMenuOff">Ant task</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="ddlgen-mapping.html"><span class="subMenuOff">Type Mapping</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">More</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="examples.html"><span class="subMenuOff">The Examples</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="extras.html"><span class="subMenuOff">3rd Party Tools</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="test-framework.html"><span class="subMenuOff">JDO Tests</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="ctf.html"><span class="subMenuOff">XML Tests</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="conf-lib.html"><span class="subMenuOff">Configuration</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href=""><span class="subMenuOff"></span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="http://www.java.net/"><span class="subMenuOff"><img src="images/javanet_button_90.gif" border="0"></span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">About</span></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="license.html"><span class="subMenuOff">License</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="user-experience.html"><span class="subMenuOffHighlighted">User stories</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="contributors.html"><span class="subMenuOff">Contributors</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="marketplace.html"><span class="subMenuOff">Marketplace</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="status.html"><span class="subMenuOff">Status, Todo</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="release-notes.html"><span class="subMenuOff">Changelog</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="library.html"><span class="subMenuOff">Library</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="contacts.html"><span class="subMenuOff">Contact</span></a></td></tr><tr><td valign="top" align="left">
        &nbsp;
                <a href="origins.html"><span class="subMenuOff">Project Name</span></a></td></tr></table><br></td><td width="7" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="70" valign="top" align="left">&nbsp;</td><td rowspan="4" width="100%" valign="top"><table cols="2" rows="2" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td valign="top" align="left"><br><img border="0" height="34" hspace="0" src="images/castor.gif" vspace="0" width="115"><br><img border="0" height="10" hspace="0" src="images/dotTrans.gif"></td><td width="120" height="5" valign="top" align="right"></td></tr></table><p></p><p></p><br><h2 align="center">The Castor Testing Framework: Test Suite Execution and Test Creation</h2><p align="center">
              Documentation Author(s):<br>Arnaud Blandin<br>Sebastien Gignoux<br>Edward Kuns<br></p><p><span class="bodyGrey">
        This document describes the Castor Testing Framework, how to execute it, what
        test suites exist, and how, when, and where to add a test.
      </span></p><HR size="1"><span class="bodyGrey"><b><a href="#Abstract">Abstract</a></b><br></span><span class="bodyGrey"><b><a href="#Introduction">Introduction</a></b><br></span><span class="bodyGrey"><b><a href="#Overview-of-the-CTF">Overview of the CTF</a></b><br></span><span class="bodyGrey"><a href="#Creating-a-JUnit-test-case">&nbsp;&nbsp;&nbsp;&nbsp;Creating a JUnit test case</a><br></span><span class="bodyGrey"><a href="#Repository-architecture">&nbsp;&nbsp;&nbsp;&nbsp;Repository architecture</a><br></span><span class="bodyGrey"><a href="#CTF-Test-Patterns">&nbsp;&nbsp;&nbsp;&nbsp;CTF Test Patterns</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#CTF-Test-Types">CTF Test Types</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Schema-Test-Patterns">Schema Test Patterns</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Marshaling-Test-Patterns">Marshaling Test Patterns</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Only-Source-Generation-Test-Patterns">Only Source Generation Test Patterns</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Source-Generation-Test-Patterns">Source Generation Test Patterns</a><br></span><span class="bodyGrey"><a href="#Life-Cycle-of-a-CTF-Test">&nbsp;&nbsp;&nbsp;&nbsp;Life Cycle of a CTF Test</a><br></span><span class="bodyGrey"><b><a href="#Building-the-CTF">Building the CTF</a></b><br></span><span class="bodyGrey"><b><a href="#Running-the-CTF">Running the CTF</a></b><br></span><span class="bodyGrey"><a href="#Command-Line-options">&nbsp;&nbsp;&nbsp;&nbsp;Command Line options</a><br></span><span class="bodyGrey"><b><a href="#The-Test-Description:-TestDescriptor.xml">The Test Description: TestDescriptor.xml</a></b><br></span><span class="bodyGrey"><a href="#Header">&nbsp;&nbsp;&nbsp;&nbsp;Header</a><br></span><span class="bodyGrey"><a href="#The-Test-(Following-the-Header)">&nbsp;&nbsp;&nbsp;&nbsp;The Test (Following the Header)</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#SchemaTest">SchemaTest</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MarshallingTest">MarshallingTest</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OnlySourceGenerationTest">OnlySourceGenerationTest</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#SourceGeneratorTest">SourceGeneratorTest</a><br></span><span class="bodyGrey"><a href="#UnitTestCase">&nbsp;&nbsp;&nbsp;&nbsp;UnitTestCase</a><br></span><span class="bodyGrey"><a href="#Listener">&nbsp;&nbsp;&nbsp;&nbsp;Listener</a><br></span><span class="bodyGrey"><a href="#Configuration">&nbsp;&nbsp;&nbsp;&nbsp;Configuration</a><br></span><span class="bodyGrey"><a href="#Call-Method">&nbsp;&nbsp;&nbsp;&nbsp;Call-Method</a><br></span><span class="bodyGrey"><b><a href="#Implementing-CastorTestable">Implementing CastorTestable</a></b><br></span><span class="bodyGrey"><a href="#dumpFields">&nbsp;&nbsp;&nbsp;&nbsp;dumpFields</a><br></span><span class="bodyGrey"><a href="#randomizeFields">&nbsp;&nbsp;&nbsp;&nbsp;randomizeFields</a><br></span><span class="bodyGrey"><a href="#Sample-Java-Class-for-a-Root_Object">&nbsp;&nbsp;&nbsp;&nbsp;Sample Java Class for a Root_Object</a><br></span><span class="bodyGrey"><b><a href="#Implementing-ObjectModelBuilder">Implementing ObjectModelBuilder</a></b><br></span><span class="bodyGrey"><a href="#buildInstance">&nbsp;&nbsp;&nbsp;&nbsp;buildInstance</a><br></span><span class="bodyGrey"><a href="#Sample-Java-Class-for-an-Object-Builder">&nbsp;&nbsp;&nbsp;&nbsp;Sample Java Class for an Object Builder</a><br></span><span class="bodyGrey"><b><a href="#Reporting-a-bug-in-Castor">Reporting a bug in Castor</a></b><br></span><span class="bodyGrey"><b><a href="#Full-Sample-of-a-Source-Generation-Test">Full Sample of a Source Generation Test</a></b><br></span><span class="bodyGrey"><a href="#TestDescriptor.xml">&nbsp;&nbsp;&nbsp;&nbsp;TestDescriptor.xml</a><br></span><span class="bodyGrey"><a href="#The-gold-file">&nbsp;&nbsp;&nbsp;&nbsp;The gold file</a><br></span><span class="bodyGrey"><a href="#PrimitivesBuilder.java">&nbsp;&nbsp;&nbsp;&nbsp;PrimitivesBuilder.java</a><br></span><span class="bodyGrey"><a href="#Launching-the-Test">&nbsp;&nbsp;&nbsp;&nbsp;Launching the Test</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Launching-the-Test-from-a-JAR">Launching the Test from a JAR</a><br></span><span class="bodyGrey">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Launching-the-Test-from-a-directory-tree">Launching the Test from a directory tree</a><br></span><span class="bodyGrey"><b><a href="#Full-Sample-of-a-Marshaling-Framework-Test">Full Sample of a Marshaling Framework Test</a></b><br></span><span class="bodyGrey"><b><a href="#Checklist-for-creating-a-CTF-test">Checklist for creating a CTF test</a></b><br></span><span class="bodyGrey"><b><a href="#Status-of-the-CTF">Status of the CTF</a></b><br></span><span class="bodyGrey"><b><a href="#XML-Schema-for-TestDescriptor.xsl">XML Schema for TestDescriptor.xsl</a></b><br></span><span class="bodyGrey"><b><a href="#References">References</a></b><br></span><HR size="1"><br><a name="Abstract"><h2>Abstract</h2></a>
      <p><span class="bodyGrey">
        Test Automation is often seen as very useful but tedious task.  However the limited
        number of test templates for Castor makes it easy to implement.
        The aim of this document is to describe the Castor Testing Framework by giving an
        overview of its functionalities and by providing detailed example test cases.
      </span></p>
    <a name="Introduction"><h2>Introduction</h2></a>
      <p><span class="bodyGrey">
        One of the main processes in the life cycle of software is the 'validation and
        verification' process. It is a central process that checks that the requisite
        functions exist and that there are no faults.  It is also known as the unpopular
        'testing' process.  The reliability and integrity of a software project are based
        on tests.  Being 'open-source' does not mean that one can avoiding writing tests.
      </span></p>
      <p><span class="bodyGrey">
        However, software testing in general consumes 30 to 70 percent of software
        development resources, does not find all the faults, and can be just as much work
        as writing the original code itself.  Moreover when involved in an open-source
        project which includes several developers and contributors, a developer needs to
        write tests that can be understood by the other developers without requring a
        great investment of time.  Ideally, these tests will highlight and test a specific
        feature, so if they fail the current developers can quickly understand what is
        broken, where the problem was introduced, and how to fix it.
      </span></p>
      <p><span class="bodyGrey">
        One solution is to choose to automated tests: as described in
        <a href="http://www.io.com/~wazmo/papers/seven_steps.html">Seven Steps to
        Automation Steps</a> by Bret Pettichord, there are several reasons to choose
        to automate tests:
      </span></p>
      <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Allow testing to happen more frequently,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Improve test coverage,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Ensure consistency, and</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Improve the reliability of testing,</span></td></tr>
      </span></table>
      <p><span class="bodyGrey">
        For all of these reasons, we have chosen to give to Castor an automated Testing
        Framework called the "Castor Testing Framework" (and referered to as the CTF).  This
        framework is built with <a href="http://www.junit.org">JUnit</a> and will help
        Castor developers.  It also helps users in several ways by:
      </span></p>
      <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Improving Castor reliability,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Easing the monitoring of bugs, as writing bug reports will be straightforward,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Building an archive of fixed bugs,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Easing the creation of a test.</span></td></tr>
      </span></table>
    <a name="Overview-of-the-CTF"><h2>Overview of the CTF</h2></a>
      <p><span class="bodyGrey">
        In this section you will be given a quick overview of the CTF:  What is the main idea
        behind it?  Where are the tests located?  What test suites exist?  What are the test
        patterns? How do you run the tests?
      </span></p>
      <p><span class="bodyGrey">
        Note: currently the CTF is written to test only Castor XML.  A future version could
        test more or all of Castor functionality.
      </span></p>

      <a name="Creating-a-JUnit-test-case"><h3>Creating a JUnit test case</h3></a>
        <p><span class="bodyGrey">
          Built on top of JUnit, the CTF simply creates test cases to be run under the JUnit
          Framework.  The main idea is to provide to the CTF the minimal information needed to
          build test cases (such as XML Schemas, Castor mapping files, XML documents or some
          initialization codes for the java object model used).  With this information, the
          CTF can then build the tests as much as possible.  This means that the developer does
          not need to know anything about JUnit to develop a JUnit test for the CTF.
        </span></p>
        <p><span class="bodyGrey">
          The information necessary for a test case can be located in a JAR file or in a directory
          structure. 
          A directory tree will contain all the
          directories and jars, and the CTF will create a global test case with these individual
          test cases.  The CTF will dynamically build the test cases located in the different jar
          files and pass them to JUnit.
        </span></p>
      

      <a name="Repository-architecture"><h3>Repository architecture</h3></a>
        <p><span class="bodyGrey">
          The code of Castor Testing Framework is located in the following Java packages:
        </span></p>
        <span class="bodyGrey"><pre>
          org.exolab.castor.tests.framework
          org.exolab.castor.tests.framework.testDescriptor
          org.exolab.castor.tests.framework.testDescriptor.types
        </pre></span>
        <p><span class="bodyGrey">
          which can be found under <tt>xmlctf/src/main/java</tt>.
        </span></p>
        <p><span class="bodyGrey">
          The tests for testing the behavior of Castor and its main features are located
          in the directory tree starting at <tt>xmlctf/tests/MasterTestSuite</tt>.
          The tests needed to keep tracks of current reported, unfixed bugs are located
          in the directory tree starting at <tt>xmlctf/tests/RegressionTestSuite</tt>.
          The hierarchy of these test suites follows the main modules of Castor:
        </span></p>
        <span class="bodyGrey"><pre>
          MasterTestSuite     / xml / introspection
                                    / mapping
                                    / marshalling
                                    / schema
                                    / sourcegenerator
          RegressionTestSuite / xml / introspection
                                    / mapping
                                    / marshalling
                                    / schema
                                    / sourcegenerator
        </pre></span>
      

      <a name="CTF-Test-Patterns"><h3>CTF Test Patterns</h3></a>
        <p><span class="bodyGrey">
          "Testing Castor XML" means not only testing the Marshalling Framework but also
          the mapping framework and the Source Generator.  Thus tests fall into one of these
          three categories and follow several patterns defined in this section. From now
          on, we will use the term "gold file" to designate a file that represents an
          expected result.  For most tests, a gold file will be an XML file.
        </span></p>

        <a name="CTF-Test-Types"><h4>CTF Test Types</h4></a>
          <p><span class="bodyGrey">
            There are four kinds of tests available for use in the CTF:
          </span></p>
          <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey"><b>Schema</b>: Test schema parsing and I/O.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
              <b>Marshaling</b>: Test XML document marshaling and unmarshaling to and from
              Java classes that you provide for the object model.
            </span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey"><b>Only Source Generation</b>: Test source generation (only).</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
              <b>Source Generation</b>: Test XML document marshaling and unmarshaling to
              and from Java classes that are created by the Castor source generator.
            </span></td></tr>
          </span></table>
        
        <a name="Schema-Test-Patterns"><h4>Schema Test Patterns</h4></a>
          <p><span class="bodyGrey">
            There is only one test pattern for a Schema test.  For each schema provided:
          </span></p>
          <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The schema is read from disk and parsed.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The parsed schema is optionally written to disk.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The parsed schema is written to a new schema object in memory.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The new schema object is compared to the original schema object read from disk.</span></td></tr>
          </span></table>
        
        <a name="Marshaling-Test-Patterns"><h4>Marshaling Test Patterns</h4></a>
          <p><span class="bodyGrey">
            There are three patterns used for a Marshaling test.  All patterns marshal and
            unmarshal XML using Java classes that you provide for the object model.  A
            Marshaling test does not use the Source Generator.  A given marshaling test
            may use any pattern in isolation or all three patterns.
          </span></p>
          <p><span class="bodyGrey">
            The pattern "Marshal/Unmarshal with randomized reference object" is used in
            isolation and is enabled/disabled separately from the other marshaling test
            patterns.  If both other patterns ("Marshal/Unmarshal with custom instantiated
            reference object" and "Unmarshal/Marshal with reference XML document") are used
            in the same test, then the object generated by the custom class must be the same
            as that provided by the input XML document.
          </span></p>
          <p><span class="bodyGrey">
            How you choose which combination of test patterns will be used is described
            below.
            
            When testing marshaling, you can optionally also test
            mapping.  Thus, mapping is tested using a Marshaling test.
          </span></p>
          <ol>
            <li>
              <p><span class="bodyGrey">Marshal/Unmarshal with custom instantiated reference object</span></p>
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  Instantiate an object model.  You provide a Java class that will
                  instantiate and initialize an object of the correct type for the test.
                </span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Marshal this object to disk.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Compared the marshaled object to a gold file.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Unmarshal the document from disk.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Compare the unmarshaled object to the original reference object.</span></td></tr>
              </span></table>
            </li>
            <li>
              <p><span class="bodyGrey">Marshal/Unmarshal with randomized reference object</span></p>
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  Instantiate an object model.  The CTF will instantiate an object
                  that is populated with random data.
                </span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Marshal this object to disk.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Compared the marshaled object to a gold file.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Unmarshal the document from disk.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Compare the unmarshaled object to the original random object.</span></td></tr>
              </span></table>
            </li>
            <li>
              <p><span class="bodyGrey">Unmarshal/Marshal with reference XML document</span></p>
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Unmarshal an XML document from disk, from an input document.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  Optionally compare this object to one that is instantiated and
                  initialized by a custom class that you write.
                </span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Marshal this object to disk.</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Compare the newly-marshaled disk file to the input document on disk.</span></td></tr>
              </span></table>
            </li>
          </ol>
        
        <a name="Only-Source-Generation-Test-Patterns"><h4>Only Source Generation Test Patterns</h4></a>
          <p><span class="bodyGrey">
            There is only one test pattern for a test of <b>only</b> the source
            generation framework.  For source generation, you can optionally provide
            a binding file, but one is not required unless your test requires binding.
          </span></p>
          <p><span class="bodyGrey">
            For each schema provided:
          </span></p>
          <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The source generator is configured and executed against the schema.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The generated source is compiled.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">A class loader is used to load the generated code.</span></td></tr>
          </span></table>
        
        <a name="Source-Generation-Test-Patterns"><h4>Source Generation Test Patterns</h4></a>
          <p><span class="bodyGrey">
            There is only one test pattern for a Source Generation test.  For source
            generation, you can optionally provide a binding file, but one is not
            required unless your test requires binding.
          </span></p>
          <p><span class="bodyGrey">
            For each schema provided:
          </span></p>
          <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The source generator is configured and executed against the schema.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">The generated source is compiled.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">A class loader is used to load the generated code.</span></td></tr>
            <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
              Use the generated code to execute a marshaling test.  The marshaling test
              may use any combination of the following marshaling test patterns as described
              in the section "Marshaling Test Patterns":
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
               <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Marshal/Unmarshal with custom instantiated reference object</span></td></tr>
               <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Marshal/Unmarshal with randomized reference object</span></td></tr>
               <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Unmarshal/Marshal with reference XML document</span></td></tr>
              </span></table>
            </span></td></tr>
          </span></table>
        
      

      <a name="Life-Cycle-of-a-CTF-Test"><h3>Life Cycle of a CTF Test</h3></a>
        <p><span class="bodyGrey">
          The most basic test available in the CTF is the Schema Test.  This is just the
          first step in the life cycle of a CTF test!  Depending on whether the source
          generator is to be used or not, the final step is either the Marshaling test or
          the Source Generation test, both of which test marshaling and unmarshaling.
          Source generation can be also tested without marshaling -- as an intermediate
          step; ideally a source-generation-only test case will later become a
          full-fledged Castor test case by having a reference document provided so
          marshaling and unmarshaling can be tested.
        </span></p>
      
    <a name="Building-the-CTF"><h2>Building the CTF</h2></a>
      <p><span class="bodyGrey">
        Before trying to launch the test cases, first make sure that the CTF is compiled.
        You can either use Subversion to check out the current trunk or you can use
        a source distribution from a release.  Castor (and the CTF) is known to build
        and run under Windows and under Linux -- and Castor developers regularly test using
        Java JDK's between 1.3 and 5, inclusive.
      </span></p>
      <p><span class="bodyGrey">
        Generally speaking, you build and run the CTF from within the "<tt>bin</tt>"
        directory of Castor's source tree.  Relative to the top of the Castor source, this
        is the directory <tt>bin</tt>.  (Pretty simple!)  Just <tt>cd</tt> to that
        directory and you're ready to go.
      </span></p>
      <p><span class="bodyGrey">
        Under Windows, you can use a <tt>CMD.EXE</tt> "shell" window or you can use
        CygWin.  Which shell you use is your preference.  Under UNIX, any shell will do.
        Change directory so the current directory is the Castor bin directory, as
        described above.  Finally, to build the CTF, just run <tt>build.bat tests</tt> or
        <tt>./build.sh tests</tt>, depending on your operating system.  To be thorough,
        you can run <tt>build.bat clean tests</tt> or <tt>./build.sh clean tests</tt>,
        which will remove previous build results and start fresh.
      </span></p>
      <p><span class="bodyGrey">
        Note:  While you can build the CTF jar -- <tt>build.bat CTFjar</tt> or
        <tt>./build.sh CTFjar</tt> -- this JAR by default contains only the test framework
        code and no tests.  The JAR is a convenient way of distributing the CTF so that
        someone can run it without needing access to the full Castor source.  However,
        this document is oriented toward developers who have access to the Castor source
        tree.  Instructions in this document don't refer to and don't use this JAR file.
      </span></p>
    <a name="Running-the-CTF"><h2>Running the CTF</h2></a>
      <p><span class="bodyGrey">
        You can run the tests by using the script <tt>CTFRun.bat</tt> under Windows
        or <tt>./CTFRun.sh</tt> under Linux/UNIX.  If you want to run a specific test or
        small subset of tests, then you need to provide the path to that Castor Testing
        Framework test or test tree -- either the full path to a JAR file or a path to
        the root directory of a tree of tests.  If you want to run the Master Test Suite,
        you can run the tests without providing any arguments.
      </span></p>
      <p><span class="bodyGrey">
        The CTF currently requires the Sun JDK (or SDK) to execute, although it may be
        possible to execute fine with GNU gcj or with JRockit. The CTF will not work if
        you are using only a JRE. This is because the CTF uses the Sun Java compiler API
        to compile code as needed for Source Generator and Marshaling Framework tests.
        The CTF code is written to allow easy extension for additional compiler
        frameworks, so if you use a compiler or runtime that is not supported, you should
        be able to easily add support for a new framework. If you want to do this,
        contact Castor committors for assistance and direction and they'll set you on the
        right course.
      </span></p>

      <a name="Command-Line-options"><h3>Command Line options</h3></a>
        <table border="1" cellspacing="0">
          <tr>
            <th align="center">Option</th>
            <th>Args</th>
            <th>Description</th>
            <th>Optional?</th>
          </tr>
          <tr>
            <td><span class="bodyGrey"><i>-verbose</i></span></td>
            <td align="center"><span class="bodyGrey" align="center">&nbsp;</span></td>
            <td><span class="bodyGrey">Flag: Give detailed information on the progress of and execution of each test.</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td><span class="bodyGrey"><i>-text</i></span></td>
            <td align="center"><span class="bodyGrey" align="center">&nbsp;</span></td>
            <td><span class="bodyGrey">Flag:  Run the tests without using the JUnit GUI.</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td><span class="bodyGrey"><i>-printStack</i></span></td>
            <td align="center"><span class="bodyGrey" align="center">&nbsp;</span></td>
            <td><span class="bodyGrey">Flag:  If any Exception occurs, dumps its stack.</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td><span class="bodyGrey"><i>-seed</i></span></td>
            <td><span class="bodyGrey">int</span></td>
            <td><span class="bodyGrey">Specifies the use of a specific seed for the pseudo-random generator.</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
        </table>
        <p><span class="bodyGrey">
          You can get information about additional command-line options provided by the
          shell script or batch script by executing (depending on your operating system):
        </span></p>
        <span class="bodyGrey"><pre>CTFRun.bat help</pre></span>
        <span class="bodyGrey"><pre>./CTFRun.sh help</pre></span>
        <p><span class="bodyGrey">
          Note:  The CTF scripts are current written expecting to be executed from the
          <tt>bin</tt> directory of Castor's source tree.  The CTF may not function
          properly if you run these scripts from another directory.
        </span></p>
      

      <p><span class="bodyGrey">
        For instance, to run all the tests from the MasterTestSuite:
      </span></p>
      <span class="bodyGrey"><pre>CTFRun.bat -verbose ../xmlctf/tests/MasterTestSuite/sourcegenerator</pre></span>
      <p><span class="bodyGrey">
        This command will execute in GUI mode (the default mode) all the test cases
        written in the master test suite for the source generator, and will print
        detailed messages about the execution of the tests.
      </span></p>
    <a name="The-Test-Description:-TestDescriptor.xml"><h2>The Test Description: TestDescriptor.xml</h2></a>
      <p><span class="bodyGrey">
        Each CTF test case can be stored in a directory or in a jar and must contain
        a single <tt>TestDescriptor.xml</tt> file. This file is located under the META-INF
        directory when using a jar file or directly in the directory that contains
        the test case files when running the CTF from a directory tree.  This file is a
        summary of the test cases contained in the directory or in the jar file.
      </span></p>
      <p><span class="bodyGrey">
        <i>
          Note: the whole XML Schema used to write TestDescriptor.xml is provided
          in the appendix.
        </i>
      </span></p>
      <p><span class="bodyGrey">
        The contents of the Test Descriptor are described and defined below.
      </span></p>
      <a name="Header"><h3>Header</h3></a>
        <p><span class="bodyGrey">
          Every test descriptor file begins with a common header.
        </span></p>
        <table border="1" cellspacing="0">
          <tr>
            <th align="center">Tag</th>
            <th>Description</th>
            <th>Optional?</th>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Name</span></td>
            <td><span class="bodyGrey">The name of the test</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Author</span></td>
            <td><span class="bodyGrey">The author of the test</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Comment</span></td>
            <td><span class="bodyGrey">Some comment on the test.  This element may occur more than once.</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Category</span></td>
            <td><span class="bodyGrey">
              The category in which this test falls:
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">basic capability</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">special case</span></td></tr>
              </span></table>
            </span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">BugFix</span></td>
            <td><span class="bodyGrey">
              Used to report a bug and keep track of it.  It is defined as follows:
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Name of the reporter</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Date of the report</span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  Date of the fix (if known) or of the creation of the testcase (otherwise)
                </span></td></tr>
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Comment on the fix (may occur more than once)</span></td></tr>
              </span></table>
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
        </table>
        <p><span class="bodyGrey">
          For instance, this example test descriptor header
        </span></p>
        <span class="bodyGrey"><pre>
&lt;?xml version='1.0'?&gt;
&lt;TestDescriptor&gt;
    &lt;Name&gt;Bug in the support of foo&lt;/Name&gt;
    &lt;Author&gt;Comprehensive Contributor&lt;/Author&gt;
    &lt;Comment&gt;
        This test case illustrates the bad handling of the foo element in the
        Marshaling Framework
    &lt;/Comment&gt;
    &lt;Comment&gt;Adding this test will prevent further regression in this area.&lt;/Comment&gt;
    &lt;Category&gt;basic capability&lt;/Category&gt;

    &lt;BugFix&gt;
        &lt;Reporter&gt;Desperate User&lt;/Reporter&gt;
        &lt;Date_Report&gt;2001-03-11T12:00:00&lt;/Date_Report&gt;
        &lt;Fixer&gt;Comprehensive Contributor&lt;/Fixer&gt;
        &lt;Date_Fix&gt;2053-12-12T15:03:00&lt;/Date_Fix&gt;
    &lt;/BugFix&gt;

     ...

&lt;/TestDescriptor&gt;
        </pre></span>
        <p><span class="bodyGrey">
          is a valid header for a TestDescriptor file.  You may wonder why CTF needs
          so much information.  Actually, this information can be used to generate
          acceptance documents and is also used to archive and track different resolved
          bugs.  The comment fields especially are present for developers and interested
          users and are not directly used during the testing process.
        </span></p>
      
      <a name="The-Test-(Following-the-Header)"><h3>The Test (Following the Header)</h3></a>
        <p><span class="bodyGrey">
          The content of TestDescriptor.xml following the header differs depending on the
          test type:
        </span></p>
        <table border="1" cellspacing="0">
          <tr>
            <th align="center">Tag</th>
            <th>Description</th>
            <th>Optional?</th>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Name</span></td>
            <td><span class="bodyGrey">The name of the test</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Author</span></td>
            <td><span class="bodyGrey">The author of the test</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Comment</span></td>
            <td><span class="bodyGrey">Some comment on the test.  This element may occur more than once.</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td><span class="bodyGrey">The test itself</span></td>
            <td><span class="bodyGrey">
              Exactly one of a SchemaTest, MarshallingTest, OnlySourceGenerationTest,
              or SourceGeneratorTest.
            </span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
        </table>

        <a name="SchemaTest"><h4>SchemaTest</h4></a>
          <p><span class="bodyGrey">
            A SchemaTest tests only that the provided schema(s) can be successfully read
            and parsed, and then written to disk.  No marshaling or unmarshaling or source
            generation is performed.
          </span></p>

          <table border="1" cellspacing="0">
            <tr>
              <th align="center">Tag</th>
              <th>Attributes</th>
              <th>Description</th>
              <th>Optional?</th>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">UnitTestCase</span></td>
              <td><span class="bodyGrey">&nbsp;</span></td>
              <td><span class="bodyGrey">One or more unit test cases (see below)</span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
          </table>
        

        <a name="MarshallingTest"><h4>MarshallingTest</h4></a>
          <p><span class="bodyGrey">
            A MarshallingTest will unmarshal the source document, then marshal it
            to a new file, then unmarshal the new document and compare to the original.
            No source generation is performed.  The Castor marshaling framework is used.
          </span></p>
          <p><span class="bodyGrey">
            If the root object has the attribute <tt>random</tt>, then additionally a
            randomized object will be created, marshaled, then unmarshaled, and the
            unmarshaled object will be compared to the original random object.
          </span></p>

          <table border="1" cellspacing="0">
            <tr>
              <th align="center">Tag</th>
              <th>Attributes</th>
              <th>Description</th>
              <th>Optional?</th>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Root_Object</span></td>
              <td><span class="bodyGrey">
                <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                  <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                    <i>dump</i>: a boolean indicating  that dumpFields() method has
                    been implemented in Root_Object and that the unmarshaled objects
                    should be dumped.
                  </span></td></tr>
                  <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                    <i>random</i>: a boolean indicating  that randomizeFields() method
                    has been implemented in Root_Object and that a randomized object
                    should be created, marshaled, and unmarshaled for comparison.
                  </span></td></tr>
                </span></table>
              </span></td>
              <td><span class="bodyGrey">The qualified name of the Root object in the generated object model</span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Configuration</span></td>
              <td><span class="bodyGrey">&nbsp;</span></td>
              <td><span class="bodyGrey">Marshal/Unmarshal configuration (see below)</span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">UnitTestCase</span></td>
              <td><span class="bodyGrey">&nbsp;</span></td>
              <td><span class="bodyGrey">One or more unit test cases (see below)</span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
          </table>
        

        <a name="OnlySourceGenerationTest"><h4>OnlySourceGenerationTest</h4></a>
          <p><span class="bodyGrey">
            An OnlySourceGenerationTest will run the Castor source generator on the schema(s)
            provided, will compile the generated source, and will load (via a class loader)
            the compiled source.  No marshaling or unmarshaling will be done.
          </span></p>

          <table border="1" cellspacing="0">
            <tr>
              <th align="center">Tag</th>
              <th>Attributes</th>
              <th>Description</th>
              <th>Optional?</th>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Schema</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">
                The name of the schema from which we generate sources, may occur more
                than once
              </span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Property_File</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">
                The name of the Source Generator property file (often named
                castorbuilder.properties) to use
              </span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Collection</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">
                The collection type to use (usually 'vector' or 'arraylist' or 'odmg');
                if absent, defaults to 'vector'
              </span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Binding_File</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">The name of the binding file (if any)</span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">UnitTestCase</span></td>
              <td><span class="bodyGrey">&nbsp;</span></td>
              <td><span class="bodyGrey">One or more unit test cases (see below)</span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
          </table>
        

        <a name="SourceGeneratorTest"><h4>SourceGeneratorTest</h4></a>
          <p><span class="bodyGrey">
            A SourceGeneratorTest will run the Castor source generator on the schema(s)
            provided, will compile the generated source, and will load (via a class loader)
            the compiled source.  Once this has been done successfully, the generated
            source will be used to unmarshal an XML document.  The document will then
            be marshaled to a new file, and then unmarshaled from that file.  The newly
            unmarshaled document will be compared to the original.
          </span></p>
          <p><span class="bodyGrey">
            If the root object has the attribute <tt>random</tt>, then additionally a
            randomized object will be created, marshaled, then unmarshaled, and the
            unmarshaled object will be compared to the original random object.
          </span></p>

          <table border="1" cellspacing="0">
            <tr>
              <th align="center">Tag</th>
              <th>Attributes</th>
              <th>Description</th>
              <th>Optional?</th>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Schema</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">
                The name of the schema from which we generate sources, may occur more
                than once
              </span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Property_File</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">
                The name of the Source Generator property file (often named
                castorbuilder.properties) to use
              </span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Collection</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">
                The collection type to use (usually 'vector' or 'arraylist' or 'odmg').
                if absent, defaults to 'vector'
              </span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Binding_File</span></td>
              <td align="center"><span class="bodyGrey" align="center">None</span></td>
              <td><span class="bodyGrey">The name of the binding file (if any)</span></td>
              <td><span class="bodyGrey">Optional</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">Root_Object</span></td>
              <td><span class="bodyGrey">
                <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                  <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                    <i>dump</i>: a boolean indicating  that dumpFields() method has
                    been implemented in Root_Object and that the unmarshaled objects
                    should be dumped.
                  </span></td></tr>
                  <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                    <i>random</i>: a boolean indicating  that randomizeFields() method
                    has been implemented in Root_Object and that a randomized object
                    should be created, marshaled, and unmarshaled for comparison.
                  </span></td></tr>
                </span></table>
              </span></td>
              <td><span class="bodyGrey">The qualified name of the Root object in the generated object model</span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
            <tr>
              <td align="center"><span class="bodyGrey" align="center">UnitTestCase</span></td>
              <td><span class="bodyGrey">&nbsp;</span></td>
              <td><span class="bodyGrey">One or more unit test cases (see below)</span></td>
              <td><span class="bodyGrey">Required</span></td>
            </tr>
          </table>
        
      

      <a name="UnitTestCase"><h3>UnitTestCase</h3></a>
        <p><span class="bodyGrey">
          This is the core of the test, this element provides the input file and output
          file used for a specific test and the name of the class used to instantiate
          the Object Model.  Once again remember that a TestDescriptor.xml describes a
          test for a general behavior of Castor which may imply several test cases.
        </span></p>
        <table border="1" cellspacing="0">
          <tr>
            <th align="center">Tag</th>
            <th>Attributes</th>
            <th>Description</th>
            <th>Optional?</th>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Name</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">The name of this test.</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Mapping_File</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">
              The mapping file for this test, if any.  This element is used only for a
              MarshallingTest, and should be absent for other test types.
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Schema</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">
              The schema to be used for this test.  This element is used only for a
              SchemaTest, and should be absent for other test types.  You can specify
              only one schema.  Alternately, if the value of this element is "<tt>*</tt>"
              then all schemas (identified by the extension <tt>.xsd</tt>) in the
              directory or JAR containing the TestDescriptor.xml will be included.
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Configuration</span></td>
            <td><span class="bodyGrey">&nbsp;</span></td>
            <td><span class="bodyGrey">Configuration for Marshaling or Unmarshaling (see below)</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Input</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">
              The name of the input file used to create a specific Object Model by
              unmarshaling this file, used in the "test with reference document" test.
              You need to provide this element for the MarshallingTest and the
              SourceGeneratorTest.  It is not used for the other test types.
            </span></td>
            <td><span class="bodyGrey">Optional, depending on test type</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">GoldFile</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">
              The name of the file which can be seen as a "gold file."  This element is
              used only in a MarshallingTest in the "test with reference document" test
              and is ignored for other test types.  This element is optional for a
              MarshallingTest.  If it is present, then the marshaled reference document
              is compared to the gold file.
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">ObjectBuilder</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">
              The fully-qualified class name of the class used to instantiate the Object
              Model used.  This can be used in addition to an input document, as a way of
              generating an additional document to compare against.  This element is optional
              for the MarshallingTest or SourceGeneratorTest (if present, used for the "test
              with reference document" test) and is not used for other test types.  If it is
              present, then the named class is instantiated.  Once instantiated, the method
              <tt>buildInstance()</tt> is invoked.  The object returned is compared against
              the unmarshaled input file.  That is, the ObjectBuilder is used to create a
              reference document.
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Failure</span></td>
            <td><span class="bodyGrey">
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  <i>exception</i>: The class name of an exception.  If <tt>Failure</tt>
                  is false, this attribute is ignored.  If <tt>Failure</tt> is true and
                  this optional attribute is present, then the test will succeed only if
                  the named Exception is thrown and the test will fail otherwise.  If
                  <tt>Failure</tt> is true and this attribute is absent, then the test will
                  succeed if <i>any</i> Exception is thrown.
                </span></td></tr>
              </span></table>
            </span></td>
            <td><span class="bodyGrey">
              A boolean.  If true, the test will pass if an exception is thrown.  Otherwise,
              the test will fail if an exception is thrown.
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Skip</span></td>
            <td align="center"><span class="bodyGrey" align="center">None</span></td>
            <td><span class="bodyGrey">A boolean.  If true, this test will be skipped.</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Listener</span></td>
            <td><span class="bodyGrey">&nbsp;</span></td>
            <td><span class="bodyGrey">
              A listener for this test (see below).  A Listener is used only for a
              MarshallingTest (it might also work for a SourceGeneratorTest but it has not
              been tested).  A Listener should be absent for other test types.
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
        </table>
      

      <a name="Listener"><h3>Listener</h3></a>
        <table border="1" cellspacing="0">
           <tr>
             <th align="center">Tag</th>
             <th>Description</th>
             <th>Optional?</th>
           </tr>
           <tr>
             <td align="center"><span class="bodyGrey" align="center">ClassName</span></td>
             <td><span class="bodyGrey">The name of the class to use for MarshalListener and/or UnmarshalListener</span></td>
             <td><span class="bodyGrey">Required</span></td>
           </tr>
           <tr>
             <td align="center"><span class="bodyGrey" align="center">Type</span></td>
             <td><span class="bodyGrey">Marshal, Unmarshal or Both.  Indicate how to use the provided ClassName.</span></td>
             <td><span class="bodyGrey">Optional, defaults to "Both".</span></td>
           </tr>
           <tr>
             <td align="center"><span class="bodyGrey" align="center">GoldFile</span></td>
             <td><span class="bodyGrey">The name of the file which can be seen as a 'gold file'</span></td>
             <td><span class="bodyGrey">Optional</span></td>
           </tr>
         </table>
      

      <a name="Configuration"><h3>Configuration</h3></a>
        <table border="1" cellspacing="0">
          <tr>
            <th align="center">Tag</th>
            <th>Description</th>
            <th>Optional?</th>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Marshal</span></td>
            <td><span class="bodyGrey">If present, the Marshaler will be configured</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Unmarshal</span></td>
            <td><span class="bodyGrey">If present, the Unmarshaler will be configured</span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
        </table>
      

      <a name="Call-Method"><h3>Call-Method</h3></a>
        <table border="1" cellspacing="0">
          <tr>
            <th align="center">Tag</th>
            <th>Attributes</th>
            <th>Description</th>
            <th>Optional?</th>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Call-Method</span></td>
            <td><span class="bodyGrey">
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  <i>name</i>: the name of the method to call on the Marshaler
                  or Unmarshaler.
                </span></td></tr>
              </span></table>
            </span></td>
            <td><span class="bodyGrey">Root tag for defining a method call</span></td>
            <td><span class="bodyGrey">Required</span></td>
          </tr>
          <tr>
            <td align="center"><span class="bodyGrey" align="center">Value</span></td>
            <td><span class="bodyGrey">
              <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
                <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
                  <i>type</i>: the fully qualified name of the java type
                  representing an argument of the method.  For a primitive type,
                  use the name of the primitive type.
                </span></td></tr>
              </span></table>
            </span></td>
            <td><span class="bodyGrey">
              The value to be passed in to the method called (this element
              can occur more than once).
            </span></td>
            <td><span class="bodyGrey">Optional</span></td>
          </tr>
        </table>
      

      <p><span class="bodyGrey">
        The following code excerpt illustrates how to configure the Marshaler by
        suppressing all the XSITypes.
      </span></p>
      <span class="bodyGrey"><pre>
&lt;Configuration&gt;
    &lt;Marshal&gt;
        &lt;Call-method name="setSuppressXSIType"&gt;
            &lt;Value type="boolean"&gt;true&lt;/Value&gt;
         &lt;/Call-method&gt;
    &lt;/Marshal&gt;
&lt;/Configuration&gt;
      </pre></span>

      <p><span class="bodyGrey">
        Please note that the Configuration element can be present at the MarshallingTestCase
        level and at the UnitTestCase level.  If it is found in both places, the only the
        UnitTestCase configuration is used.
      </span></p>
    <a name="Implementing-CastorTestable"><h2>Implementing CastorTestable</h2></a>
      <p><span class="bodyGrey">
        As you  may have noticed, while testing the SourceGenerator or the Marshaling
        Framework you have to provide the name of the 'Root Object' of your Object
        Model.  The Root Object represents the mapping of the root element of the XML
        document.
      </span></p>
      <p><span class="bodyGrey">
        For instance, given the following XML document:
      </span></p>
      <span class="bodyGrey"><pre>
&lt;?xml version='1.0'?&gt;
&lt;Invoice&gt;
    &lt;Customer&gt;
        ...
    &lt;/Customer&gt;
    &lt;Items&gt;
        ...
    &lt;/Items&gt;
      ...
&lt;/Invoice&gt;
      </pre></span>
      <p><span class="bodyGrey">
        the class that represents the Root Object is <tt>Invoice</tt>.
      </span></p>
      <p><span class="bodyGrey">
        You provide your own implementation of a Root Object only for a test of the
        Marshaling framework.  For a Source Generation framework test, the appropriate
        interface is automatically implemented in the generated source.  Thus, the
        discussion below really only applies to a MarshallingTest type of CTF test.
      </span></p>
      <p><span class="bodyGrey">
        The CTF needs your Root Object to override the equals() method of the
        <tt>java.lang.Object</tt> class.  This is required, not optional, and is used when
        comparing object models.
      </span></p>
      <p><span class="bodyGrey">
        While not strictly required, it is highly recommended that the Root Object
        implement the interface <tt>org.exolab.castor.tests.framework.CastorTestable</tt>.
        Implementing this interface is simple:  implement two methods: <tt>dumpFields()</tt>
        and <tt>randomizeFields()</tt>.  These methods are described below.
      </span></p>
      <a name="dumpFields"><h3>dumpFields</h3></a>
        <p><span class="bodyGrey">
          Here is the JavaDoc of the method as defined in the interface:
        </span></p>
        <span class="bodyGrey"><pre>
    /**
     * Return a recursive dump of the content of the
     * object fields in a user readable format.
     * This is used to retrieve the state of the object if
     * castor fail to marshal the object for any reason.
     *
     * We don't rely on the toString() function as it could have
     * been already implemented with another semantic.
     */
        </pre></span>
      

      <a name="randomizeFields"><h3>randomizeFields</h3></a>
        <p><span class="bodyGrey">
          Here is the JavaDoc of the method as defined in the interface:
        </span></p>
        <span class="bodyGrey"><pre>
    /**
     * The instance of the object will randomize the content
     * of its field. This is used to create an instance
     * of the object model without having to
     * unmarshal anything.
     */
        </pre></span>
      
      <p><span class="bodyGrey">
        In order to tell the CTF that one (or both) of these methods is implemented you
        have to set the attributes "dump" and "random" to true in the Root_Object element
        of the test descriptor:
      </span></p>
      <p><span class="bodyGrey">
        <tt>&lt;Root_Object <b>dump='true' random='true'</b>&gt;Root&lt;/Root_Object&gt;</tt>
      </span></p>
      <p><span class="bodyGrey">
        Note: When using the Source Generator outside the CTF, you can automatically
        generate classes that implements CastorTestable by using the command line
        option "<tt>-testable</tt>".  Within the CTF and the source generator-based tests,
        this option is automatically provided to the source generation framework.
      </span></p>
      <a name="Sample-Java-Class-for-a-Root_Object"><h3>Sample Java Class for a Root_Object</h3></a>
        <p><span class="bodyGrey">
          The following is an example of a Root Object suitable for use in a
          MarshallingTest Marshaling framework test.
        </span></p>
        <span class="bodyGrey"><pre>
import java.util.Vector;
import java.util.Enumeration;

// CTF specific
import org.exolab.castor.tests.framework.CastorTestable;

// Provide the necessary methods to randomly create object fields
import org.exolab.castor.tests.framework.RandomHelper;

public class Root implements CastorTestable {
    private String _name;
    private Vector _data;
    public void setName(String name) {
        _name = name;
    }
    public String getName() {
        return _name;
    }
    public void setData(Vector data) {
        _data = data;
    }
    public Vector getData() {
        return _data;
    }

    // --- CastorTestable ------------------------
    public String dumpFields() {
        StringBuffer fields = new StringBuffer();
        fields.append("name=" + _name + "; data=\n");
        for (Enumeration e = _data.elements(); e.hasMoreElements(); ) {
            CastorTestable element = (CastorTestable)e.nextElement()
            fields.append("[" + element.dumpFields() + "]\n");
        }
        return fields.toString();
    }

    public void randomizeFields() throws InstantiationException,
                                         IllegalAccessException {
        _name = RandomHelper.rndString();
        _data = RandomHelper.rndVector(_data, Data.class);
    }

    /**
     * Note: We should override hashCode() but have not.
     * @param obj
     */
    public boolean equals(java.lang.Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj instanceof Root) {
            Root temp = (Root)obj;
            if (!(this._name.equals(temp._name))) {
                return false;
            }
            if (!(this._data.equals(temp._data))) {
                return false;
            }
            return true;
        }
        return false;
    } //-- boolean equals(java.lang.Object)

} //Root
        </pre></span>
      
    <a name="Implementing-ObjectModelBuilder"><h2>Implementing ObjectModelBuilder</h2></a>
      <p><span class="bodyGrey">
        For a MarshallingTest or a SourceGeneratorTest, in addition to an input document
        (for unmarshaling), you can also provide an object that will directly and
        programmatically (not from a file) construct your desired test document.  This is
        a class that will instantiate and correctly populate your test object.  This class
        <i>must</i> implement <tt>equals()</tt>!  It will be compared against your
        unmarshaled input document.
      </span></p>
      <p><span class="bodyGrey">
        It's recommended that your Object Model Builder also implement the interface
        CastorTestable, but this is not required.
      </span></p>
      <a name="buildInstance"><h3>buildInstance</h3></a>
        <p><span class="bodyGrey">
          Here is the JavaDoc of the method declaration in the interface:
        </span></p>
        <span class="bodyGrey"><pre>
    /**
     * Generates and returns a new instance from the hard-coded data.
     *
     * @return a new instance from the hard-coded data
     * @throws Exception if anything goes wrong creating the instance
     */
        </pre></span>
      
      <a name="Sample-Java-Class-for-an-Object-Builder"><h3>Sample Java Class for an Object Builder</h3></a>
        <p><span class="bodyGrey">
          The following is an example of an Object Builder suitable for use in a
          MarshallingTest or SourceGeneratorTest.  The class <tt>Root</tt> used
          here would be generated for you if you are creating a SourceGeneratorTest,
          but would be provided by you for a MarshallingTest.  This is the Root
          Object of the test.
        </span></p>
        <span class="bodyGrey"><pre>
import java.util.Vector;

// CTF specific
import org.exolab.castor.tests.framework.ObjectBuilder;

public class Builder implements ObjectBuilder {
    /**
     * Build the expected object model.
     */
    public Object buildInstance() {
        Root r = new Root();
        r.setName("object name");
        Vector v = new Vector(3);
        v.add(new Data("CASTOR-XML", "good"));
        v.add(new Data("CASTOR-JDO", "good"));
        v.add(new Data("CASTOR-DAX", "to be improved"));
        r.setData(v);
        return r;
    }
} //Builder
        </pre></span>
      
    <a name="Reporting-a-bug-in-Castor"><h2>Reporting a bug in Castor</h2></a>
      <p><span class="bodyGrey">
        With the CTF, reporting a bug should be easier.  You should no longer need to find
        yourself in endless discussion in describing the bug you encounter.  All you have
        to do is:
      </span></p>
      <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Write a simple test case as described previously.</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Create a jar or a directory tree (which you can ZIP up).</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">
          Send it to the <a href="http://jira.codehaus.org/browse/CASTOR">Exolab JIRA</a> or
          to a <a href="http://www.castor.org/contributors.html">contributor:</a><br>
          Exolab JIRA: http://jira.codehaus.org/browse/CASTOR<br>
          Committer list: http://www.castor.org/contributors.html
        </span></td></tr>
      </span></table>
    <a name="Full-Sample-of-a-Source-Generation-Test"><h2>Full Sample of a Source Generation Test</h2></a>
      <p><span class="bodyGrey">
        In this section, we demonstrate a complete test case for the Source Generator.
        The sample test tests the handling of primitives W3C XML Schema type in the
        Source Generator using the default properties of the Source Generator.  This test
        just illustrates that the Source Generator supports primitives types.
      </span></p>
      <p><span class="bodyGrey">
        First we have to create the TestDescriptor xml file:
      </span></p>

      <a name="TestDescriptor.xml"><h3>TestDescriptor.xml</h3></a>
        <p><span class="bodyGrey">The test descriptor just describes the test case:</span></p>
        <span class="bodyGrey"><pre>
&lt;?xml version='1.0'?&gt;
&lt;TestDescriptor&gt;
    &lt;Name&gt;Test primitive types with default properties&lt;/Name&gt;
    &lt;Comment&gt;
        Test W3C XML Schema primitives type handling in the Source Generator
    &lt;/Comment&gt;
    &lt;Comment&gt;The supported types are:
                            -string
                            -boolean
                            -decimal
                            -float
                            -double
                            -duration
                            -dateTime
                            -time
                            -gYearMonth
                            -gYear
                            -gMonthDay
                            -gDay
                            -gMonth
                            -hexBinary
                            -base64Binary
                            -anyURI
                            -QName
    &lt;/Comment&gt;
    &lt;Comment&gt;
        The facets are not tested in this case and Java primitives are used.
    &lt;/Comment&gt;
    &lt;Comment&gt;hexBinary and base64Binary are not tested.&lt;/Comment&gt;

    &lt;Category&gt;basic capability&lt;/Category&gt;

    &lt;SourceGeneratorTest&gt;
        &lt;Schema&gt;primitives.xsd&lt;/Schema&gt;
        &lt;Root_Object random="true" dump="true"&gt;TestPrimitives&lt;/Root_Object&gt;
        &lt;UnitTestCase&gt;
            &lt;Name&gt;Test Generation&lt;/Name&gt;
            &lt;Input&gt;input1.xml&lt;/Input&gt;
        &lt;/UnitTestCase&gt;
        &lt;UnitTestCase&gt;
            &lt;Name&gt;Test Marshalling with the generated Descriptors&lt;/Name&gt;
            &lt;Input&gt;input1.xml&lt;/Input&gt;
            &lt;ObjectBuilder&gt;PrimitivesBuilder&lt;/ObjectBuilder&gt;
        &lt;/UnitTestCase&gt;
        &lt;UnitTestCase&gt;
            &lt;Name&gt;Test the validation&lt;/Name&gt;
            &lt;Input&gt;badinput.xml&lt;/Input&gt;
            &lt;Failure&gt;true&lt;/Failure&gt;
        &lt;/UnitTestCase&gt;
    &lt;/SourceGeneratorTest&gt;
&lt;/TestDescriptor&gt;
        </pre></span>
        <p><span class="bodyGrey">
          Once we have the Test Descriptor, we have to provide the <tt>primitives.xsd</tt>
          and <tt>input1.xml</tt> and <tt>badinput.xml</tt> files as referenced in the Test
          Descriptor.  We don't need to worry about implementing <tt>CastorTestable</tt> since the
          SourceGenerator will do so for us: it automatically generates the <tt>dumpFields()</tt>
          and <tt>randomizeFields()</tt> methods.
        </span></p>
        <p><span class="bodyGrey">
          Because we want to provide a thorough example, we also want to provide an
          instance builder, i.e., implementing the ObjectBuilder interface, as referenced
          in the Test Descriptor.
        </span></p>
      

      <a name="The-gold-file"><h3>The gold file</h3></a>
        <span class="bodyGrey"><pre>
&lt;?xml version="1.0"?&gt;
&lt;TestPrimitives StringTestAtt="StringAttribute" booleanTestAtt="false"
                floatTestAtt="3.141526" doubleTestAtt="1.171077"
                decimalTestAtt="123456789.987654321"
                uriReferenceTestAtt="http://www.castor.org"
                IDTestAtt="Castor0.91" QNameTestAtt="xsd:type"&gt;
    &lt;StringTestEle&gt;StringElement&lt;/StringTestEle&gt;
    &lt;booleanTestEle&gt;true&lt;/booleanTestEle&gt;
    &lt;floatTestEle&gt;1234567899876543210&lt;/floatTestEle&gt;
    &lt;doubleTestEle&gt;0.6385682166079459&lt;/doubleTestEle&gt;
    &lt;decimalTestEle&gt;0.2693678757526658529286578414030373096466064453125&lt;/decimalTestEle&gt;
    &lt;timeDurationTestEle&gt;P1Y2M3DT4H5M6S&lt;/timeDurationTestEle&gt;
    &lt;uriReferenceTestEle&gt;http://castor.exolab.org&lt;/uriReferenceTestEle&gt;
    &lt;IDTestEle&gt;ID9&lt;/IDTestEle&gt;
    &lt;QNameTestEle&gt;Test:test&lt;/QNameTestEle&gt;
&lt;/TestPrimitives&gt;
        </pre></span>
      

      <a name="PrimitivesBuilder.java"><h3>PrimitivesBuilder.java</h3></a>
        <p><span class="bodyGrey">
          <tt>PrimitivesBuilder.java</tt> is a simple implementation of ObjectBuilder.
          It contains the hard-coded values of the input xml file, it is used to create a "gold"
          Object Model we can use to compare the Object Model created from the
          unmarshalling of "<tt>input1.xml</tt>."
        </span></p>
        <span class="bodyGrey"><pre>
import java.util.Vector;

//the interface we implement
import org.exolab.castor.tests.framework.ObjectBuilder;

public class PrimitivesBuilder implements ObjectBuilder {
    /**
     * Build the object expected when unmarshalling 'input1.xml'.
     */
    public Object buildInstance() {
        TestPrimitives test = new TestPrimitives();
        test.setStringTestAtt("StringAttribute");
        test.setBooleanTestAtt(false);
        test.setFloatTestAtt(3.141526f);
        test.setDoubleTestAtt(1.171077);
        ...
        return test;
    }
}
        </pre></span>
      

      <a name="Launching-the-Test"><h3>Launching the Test</h3></a>
        <p><span class="bodyGrey">
          The last step consists of packaging up the collection of files that
          make up the test case.  You have two choices.  You can either create a JAR
          file containing the test, or you can create a directory structure containing
          the test.  You can use whichever option is easier.
        </span></p>
        <a name="Launching-the-Test-from-a-JAR"><h4>Launching the Test from a JAR</h4></a>
          <p><span class="bodyGrey">
            Create a JAR from your test's source files:
          </span></p>
          <span class="bodyGrey"><pre>
   jar cvf ../PrimitivesWithoutFacets.jar *.*
          </pre></span>
          <p><span class="bodyGrey">
            You can now execute this test by running the CTF with the path to this JAR
            file:
          </span></p>
          <span class="bodyGrey"><pre>
   CTFRun -verbose PrimitivesWithoutFacets.jar
          </pre></span>
        
        <a name="Launching-the-Test-from-a-directory-tree"><h4>Launching the Test from a directory tree</h4></a>
          <p><span class="bodyGrey">
            Create a new directory under the appropriate test suite directory tree.
            For this test, an appropriate directory would be:
            <tt>xmlctf/tests/MasterTestSuite/sourcegenerator/PrimitivesWithoutFacets</tt>.
            Copy all of the files that comprise your test into that directory.
          </span></p>
          <p><span class="bodyGrey">
            You can now execute this test by running the CTF with the path to this
            directory:
          </span></p>
          <span class="bodyGrey"><pre>
CTFRun -verbose ../xmlctf/tests/MasterTestSuite/sourcegenerator/PrimitivesWithoutFacets
          </pre></span>
        
      
    <a name="Full-Sample-of-a-Marshaling-Framework-Test"><h2>Full Sample of a Marshaling Framework Test</h2></a>
      <p><span class="bodyGrey">
        <i>To be written....</i>
      </span></p>
    <a name="Checklist-for-creating-a-CTF-test"><h2>Checklist for creating a CTF test</h2></a>
      <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Create a directory (the test directory) to put the files needed for the test case.</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Create the META-INF directory in this directory.</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Create your TestDescriptor.xml.</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Write the XML schema, mapping file or XML documents needed and put them under your test directory.</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">If you provide an Object Model don't forget to override the equals() method</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">If necessary, implement the dumpFields() and randomizeFields() methods.</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Compile the provided object model</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Create a jar representing the test directory</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Run the test</span></td></tr>
      </span></table>
    <a name="Status-of-the-CTF"><h2>Status of the CTF</h2></a>
      <p><span class="bodyGrey">
        The current version of the CTF is not perfect and could use some improvements.
        However, it provides a solid base upon which to test the behavior of Castor.  And
        its presence will help developers to avoid regression while fixing bugs and adding
        new features.
      </span></p>
      <p><span class="bodyGrey">
        Future versions of the CTF may include:
      </span></p>
      <table border="0" cellpadding="2" cellspacing="2"><tr><td colspan="2" height="5"></td></tr><span class="bodyGrey">
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">A tool to generate test acceptance documents,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">An updated architecture for RandomHelper,</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">A way to launch the test from the web site, and</span></td></tr>
        <tr><td align="left" valign="top" width="10">-</td><td align="left" valign="top"><span class="bodyGrey">Better exception handling and failure tests.</span></td></tr>
      </span></table>
    <a name="XML-Schema-for-TestDescriptor.xsl"><h2>XML Schema for TestDescriptor.xsl</h2></a>
      <p><span class="bodyGrey">
        The full source of the W3C XML schema for the TestDescriptor object
        is included below.  It is found in the source file
        <tt>TestDescriptor.xml</tt>.  Note that this schema is a work in progress
        and is subject to change.
      </span></p>
      <span class="bodyGrey"><pre>
      <font size="-2">
      
&lt;?xml version='1.0' encoding="UTF-8"?&gt;
&lt;!--
    Castor Testing Framework Test Descriptor XML Schema
    Namespace: http://castor.exolab.org/Test

    This schema is used to generate the
    org.exolab.castor.tests.framework.testdescriptor package
    *Note*: This schema is under evolution and subject to change.
     This schema is under the Exolab license
 --&gt;
&lt;!-- $Id: ctf.xml 6782 2007-01-29 01:56:19Z ekuns $ --&gt;
&lt;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://castor.exolab.org/Test"
            xmlns:test="http://castor.exolab.org/Test"
            elementFormDefault="qualified"&gt;

    &lt;!-- The root element which contains an header and a test element--&gt;
    &lt;xsd:element name="TestDescriptor"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Castor Testing Framework Test Descriptor XML Schema
                &amp;lt;p&gt;
                Namespace: http://castor.exolab.org/Test
                &amp;lt;p&gt;
                This schema is used to generate the
                org.exolab.castor.tests.framework.testdescriptor package
                *Note*: This schema is under evolution and subject to change.
                 This schema is under the Exolab license.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- The name of the test --&gt;
                &lt;xsd:element name="Name" type="xsd:string" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- The author of the tests --&gt;
                &lt;xsd:element name="Author" type="xsd:string" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- Some comments for describing the test --&gt;
                &lt;xsd:element name="Comment" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/&gt;
                &lt;!-- Define the category of the test --&gt;
                &lt;xsd:element name="Category" type="test:CategoryType" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- Is it a bug fix?--&gt;
                &lt;xsd:element ref="test:BugFix" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- Test for the SourceGenerator OR the Marshaling Framework--&gt;
                &lt;xsd:choice&gt;
                    &lt;!-- Test case for the SourceGenerator --&gt;
                    &lt;xsd:element ref="test:SourceGeneratorTest" minOccurs="0" maxOccurs="1"/&gt;
                    &lt;!-- Test case for the Marshaling Framework --&gt;
                    &lt;xsd:element ref="test:MarshallingTest" minOccurs="0" maxOccurs="1"/&gt;
                    &lt;!-- Test case for the Schema Object Model --&gt;
                    &lt;xsd:element ref="test:SchemaTest" minOccurs="0" maxOccurs="1"/&gt;
                    &lt;!-- Test case for Source Generation ONLY (no marshaling or unmarshaling) --&gt;
                    &lt;xsd:element ref="test:OnlySourceGenerationTest" minOccurs="0" maxOccurs="1"/&gt;
                &lt;/xsd:choice&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="BugFix"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Encapsulates information about a bug fix, including the reporter's
                name (or Email address), the date of the report and of the fix,
                and one or more comments about the bug.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the reporter name or EMail address--&gt;
                &lt;xsd:element name="Reporter" type="xsd:string" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- date of the report--&gt;
                &lt;xsd:element name="Date_Report" type="xsd:date" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- date of the fix--&gt;
                &lt;xsd:element name="Date_Fix" type="xsd:date" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- Some comments on the fix or the bug --&gt;
                &lt;xsd:element name="Comment" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="SourceGeneratorTest"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Tests source generation and then tests the generated source, testing
                both marshaling and unmarshaling.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the names of the schema files to generate sources from--&gt;
                &lt;!-- assume that the Testing Framework will try to match the name --&gt;
                &lt;!-- by looking in all the JARs - directories --&gt;
                &lt;xsd:element name="Schema" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/&gt;
                &lt;!-- The name of the properties file used with this SourceGenerator test case--&gt;
                &lt;xsd:element name="Property_File" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- The name of the collection type used with this SourceGenerator test case--&gt;
                &lt;xsd:element ref="test:Collection" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the binding file name --&gt;
                &lt;xsd:element name="BindingFile" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the qualified name of the root Object --&gt;
                &lt;!-- later: define a pattern to describe a Java quailified name--&gt;
                &lt;xsd:element ref="test:Root_Object" minOccurs="1" maxOccurs="1"/&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref="test:UnitTestCase" minOccurs="1" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="MarshallingTest"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Test marshaling.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the qualified name of the root Object --&gt;
                &lt;!-- later: define a pattern to describe a Java quailified name--&gt;
                &lt;xsd:element ref="test:Root_Object" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the configuration for the marshaling framework --&gt;
                &lt;xsd:element ref="test:Configuration" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref="test:UnitTestCase" minOccurs="1" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="SchemaTest"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Tests a schema.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref="test:UnitTestCase" minOccurs="1" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="OnlySourceGenerationTest"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Tests source generation only, and does not attempt to use the generated code.  While
                a &lt;code&gt;SourceGeneratorTest&lt;/code&gt; is better because it is more thorough, sometimes
                the only thing that requires testing is the code generation.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the names of the schema files to generate sources from--&gt;
                &lt;!-- assume that the Testing Framework will try to match the name --&gt;
                &lt;!-- by looking in all the JARs - directories --&gt;
                &lt;xsd:element name="Schema" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/&gt;
                &lt;!-- The name of the properties file used with this SourceGenerator test case--&gt;
                &lt;xsd:element name="Property_File" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- The name of the collection type used with this SourceGenerator test case--&gt;
                &lt;xsd:element ref="test:Collection" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the binding file name --&gt;
                &lt;xsd:element name="BindingFile" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref="test:UnitTestCase" minOccurs="1" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="Root_Object" type="test:RootType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The qualified name of the root Object.
                TODO: define a pattern to describe a Java quailified name.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="Collection" default="vector"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The data type to use in collections.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
           &lt;xsd:simpleType&gt;
            &lt;xsd:restriction base="xsd:string"&gt;
                &lt;xsd:enumeration value="vector"/&gt;
                &lt;xsd:enumeration value="arraylist"/&gt;
                  &lt;xsd:enumeration value="odmg"/&gt;
            &lt;/xsd:restriction&gt;
        &lt;/xsd:simpleType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="UnitTestCase"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A definition of a single Unit Test testcase.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- The name of the test --&gt;
                &lt;xsd:element name="Name" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;xsd:choice minOccurs="0"&gt;
                    &lt;!-- the mapping file used (if any) --&gt;
                    &lt;xsd:element name="Mapping_File" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                    &lt;!-- the name of the schema to read/write --&gt;
                    &lt;!-- a '*' will indicate that the CTF will try to read/write --&gt;
                    &lt;!-- all the schemas present in the directory or jar --&gt;
                    &lt;xsd:element name="Schema" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;/xsd:choice&gt;
                &lt;!-- the configuration for the marshalling framework --&gt;
                &lt;xsd:element ref="test:Configuration" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the input XML file for unmarshaling --&gt;
                &lt;xsd:element name="Input" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the file to compared a marshaled document to --&gt;
                &lt;xsd:element name="GoldFile" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the ObjectBuilder class used for this test case --&gt;
                &lt;xsd:element name="ObjectBuilder" type="xsd:string" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- a boolean that indicates if the test case intents to fail (Exception thrown)--&gt;
                &lt;xsd:element name="Failure" type="test:FailureType" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- will cause the test to be ignored --&gt;
                &lt;xsd:element name="Skip"   type="xsd:boolean" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- the listener to use for unmarshaling, marshaling or both --&gt;
                &lt;xsd:element name="Listener" type="test:ListenerType" minOccurs="0" maxOccurs="1"/&gt;
                &lt;!-- for a schema test, the number of differences expected --&gt;
                &lt;xsd:element name="SchemaDifferences" type="test:SchemaDifferencesType"
                             minOccurs="0" maxOccurs="2"/&gt;
                &lt;!-- Some comments for describing the test --&gt;
                &lt;xsd:element name="Comment" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="Configuration"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
           &lt;xsd:choice&gt;
              &lt;xsd:element name="Marshal" type="test:ConfigurationType"/&gt;
              &lt;xsd:element name="Unmarshal" type="test:ConfigurationType"/&gt;
           &lt;/xsd:choice&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:complexType name="ConfigurationType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Configuration for marshaling or unmarshaling or source generation.  Contains
                a list of methods to be called on the marshaler or unmarshaler or source
                generator with the parameters to be provided for each method.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:sequence&gt;
           &lt;xsd:element ref="test:Call-method" maxOccurs="unbounded"/&gt;
        &lt;/xsd:sequence&gt;
    &lt;/xsd:complexType&gt;

    &lt;xsd:element name="Call-method"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A single method to call on a marshaler or unmarshaler or source generator
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;xsd:element ref="test:Value" maxOccurs="unbounded"/&gt;
            &lt;/xsd:sequence&gt;
            &lt;!-- the name of the method to call --&gt;
            &lt;xsd:attribute name="name" type="xsd:string"/&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name="Value"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A parameter to be provided to a method.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:simpleContent&gt;
                &lt;xsd:extension base="xsd:string"&gt;
                    &lt;!-- java type --&gt;
                    &lt;xsd:attribute name="type" type="xsd:string" required="true"/&gt;
                &lt;/xsd:extension&gt;
            &lt;/xsd:simpleContent&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:simpleType name="CategoryType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The type of test case, either basic capability or a special case.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:restriction base="xsd:string"&gt;
            &lt;xsd:enumeration value="basic capability"/&gt;
            &lt;xsd:enumeration value="special case"/&gt;
            &lt;!-- Extensible--&gt;
        &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!--A root object in an object model--&gt;
    &lt;xsd:complexType name="RootType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The definition of the Root Type in the object model.  Contains two
                boolean attributes:  &lt;code&gt;random&lt;/code&gt; and &lt;code&gt;dump&lt;/code&gt;.
                If random is set to true, a test using randomized objects will
                be executed.  If dump is set to true, the object will be dumped
                to specific files.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexContent&gt;
            &lt;xsd:extension base="test:StringType"&gt;
                &lt;!--set to true to randomly generate the given Object Model--&gt;
                &lt;xsd:attribute name="random" type="xsd:boolean" default="false"/&gt;
                &lt;!--set to true to dump the given Object Model states in specific files--&gt;
                &lt;xsd:attribute name="dump"   type="xsd:boolean" default="false"/&gt;
            &lt;/xsd:extension&gt;
        &lt;/xsd:complexContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;xsd:complexType name="StringType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A Java String.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:simpleContent&gt;
            &lt;xsd:extension base="xsd:string"/&gt;
        &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;!-- The failure type --&gt;
    &lt;xsd:complexType name="FailureType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                True if this test is expected to throw an Exception and if it would thus
                be an error if the test does not throw an Exception.  False otherwise.
                &amp;lt;p&gt;
                If FailureType is true, then this element optionally contains the attribute
                &lt;code&gt;exception&lt;/code&gt; that contains the class of the Exception that is
                expected.  If this attribute is not provided, then the presence of any
                exception causes the test to pass.  Otherwise, the specific exception
                has to be thrown for the test to pass.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:simpleContent&gt;
            &lt;xsd:extension base="xsd:boolean"&gt;
                &lt;!-- if you expect a specific exception, you can specify it here --&gt;
                &lt;xsd:attribute name="exception" type="xsd:string" use="optional"/&gt;
                &lt;!-- if you expect the failure at a specific step, specify which step --&gt;
                &lt;xsd:attribute name="FailureStep" type="test:FailureStepType" use="optional"/&gt;
            &lt;/xsd:extension&gt;
        &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;!-- The failure type --&gt;
    &lt;xsd:complexType name="SchemaDifferencesType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                If you expect a non-zero number of differences when comparing schemas,
                add one of these elements and provide the FailureStep attribute
                to say which step this difference applies to.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:simpleContent&gt;
            &lt;xsd:extension base="xsd:int"&gt;
                &lt;xsd:attribute name="FailureStep" type="test:FailureStepType" use="required"/&gt;
            &lt;/xsd:extension&gt;
        &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;xsd:simpleType name="FailureStepType"&gt;
       &lt;xsd:restriction base="xsd:string"&gt;
           &lt;xsd:enumeration value="parse-schema"/&gt;
           &lt;xsd:enumeration value="write-schema"/&gt;
           &lt;xsd:enumeration value="compare-schema"/&gt;
           &lt;xsd:enumeration value="source-generation"/&gt;
           &lt;xsd:enumeration value="source-compilation"/&gt;
           &lt;xsd:enumeration value="load-generated-classes"/&gt;
           &lt;xsd:enumeration value="unmarshal-reference"/&gt;
           &lt;xsd:enumeration value="marshal-to-disk"/&gt;
           &lt;xsd:enumeration value="compare-to-reference"/&gt;
           &lt;xsd:enumeration value="second-compare"/&gt;
           &lt;xsd:enumeration value="listener-comparison"/&gt;
           &lt;xsd:enumeration value="second-unmarshal"/&gt;
       &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!-- Marshal/Unmarshal Listener type --&gt;
    &lt;xsd:complexType name="ListenerType"&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:sequence&gt;
            &lt;xsd:element name="GoldFile" type="xsd:string" maxOccurs="1"/&gt;
            &lt;!-- the fully qualified name for the listener --&gt;
            &lt;xsd:element name="ClassName" type="xsd:string" minOccurs="1" maxOccurs="1"/&gt;
            &lt;!-- The type of listener: Marshal, Unmarshal or Both --&gt;
            &lt;xsd:element name="Type" maxOccurs="1" default="Both"&gt;
                &lt;xsd:simpleType&gt;
                    &lt;xsd:restriction base="xsd:string"&gt;
                        &lt;xsd:enumeration value="Marshal"/&gt;
                        &lt;xsd:enumeration value="Unmarshal"/&gt;
                        &lt;xsd:enumeration value="Both"/&gt;
                    &lt;/xsd:restriction&gt;
                &lt;/xsd:simpleType&gt;
            &lt;/xsd:element&gt;
        &lt;/xsd:sequence&gt;
    &lt;/xsd:complexType&gt;

&lt;/xsd:schema&gt;
      </font>
      </pre></span>
    <a name="References"><h2>References</h2></a>
      <ol>
        <li>
          Seven Steps to Test Automation Success<br>
          Version from June 2001<br>
          Bret Pettichord<br>
          See <a href="http://www.io.com/~wazmo/papers/seven_steps.html">
                 http://www.io.com/~wazmo/papers/seven_steps.html </a>
        </li>
        <li>
          JUnit Framework<br>
          See <a href="http://www.junit.org">http://www.junit.org/</a>
          and <a href="http://junit.sourceforge.net/junit3.8.1/index.html">
                 http://junit.sourceforge.net/junit3.8.1/index.html</a>
        </li>
        <li>
          Castor XML<br>
          Exolab Castor XML Team<br>
          See <a href="http://www.castor.org/">http://www.castor.org/</a>
        </li>
        <li>
          Source Generator User Documentation<br>
          Exolab Castor XML Team<br>
          See <a href="http://www.castor.org/SourceGeneratorUser.pdf">
                 http://www.castor.org/SourceGeneratorUser.pdf </a>
        </li>
      </ol>
    </td></tr><tr height="5"><td width="10" height="5" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td height="5" bgcolor="#7270c2" valign="top" width="150"><img src="images/dotTrans.gif" width="1" height="15" border="0"><br><img src="images/line_sm.gif" width="105" height="3" border="0" align="right"></td><td width="7" height="5" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="70" height="5" valign="top" align="left">&nbsp;</td><td width="120" height="5" valign="top" align="left">&nbsp;</td></tr><tr><td width="10" height="5" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td bgcolor="#7270c2" valign="top" align="left" width="150"></td><td width="7" bgcolor="#a9a5de" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="25" border="0"></td><td width="70" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="25" border="0"></td><td width="120" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="10" rowspan="2" height="100%" bgcolor="#7270c2" valign="bottom" align="left"><img src="images/stripes1.gif" width="10" height="125" border="0"></td><td rowspan="2" height="100%" bgcolor="#7270c2" valign="bottom" align="left" width="150"><img src="images/stripe105.gif" width="105" height="125" border="0"></td><td width="7" rowspan="2" height="100%" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="70" height="100%" valign="top" align="left">&nbsp;</td><td width="120" height="100%" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="70" height="25" valign="top" align="left">&nbsp;</td><td width="400" height="25" valign="bottom" align="left"><br><br><img src="images/line_light.gif" border="0" width="400" height="3"><br><p></p><span class="bodyGrey"><small><notice>
    Copyright &copy; 1999-2005 <a href="http://www.exolab.org">ExoLab Group</a>, Intalio Inc.,
    and Contributors.  All rights reserved.
  </notice><br>&nbsp;<br></small><small><notice>
    Java, EJB, JDBC, JNDI, JTA, Sun, Sun Microsystems are trademarks or registered
    trademarks of Sun Microsystems, Inc. in the United States and in other
    countries. XML, XML Schema, XSLT and related standards are trademarks or registered
    trademarks of MIT, INRIA, Keio or others, and a product of the World Wide Web
    Consortium. All other product names mentioned herein are trademarks of their respective
    owners.
  </notice><br>&nbsp;<br></small></span><p></p>
          &nbsp;
        </td><td width="120" height="25" valign="top" align="left">&nbsp;</td></tr></table><script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
        var pageTracker = _gat._getTracker("UA-3544187-1");
        pageTracker._trackPageview();
    </script></body></html>